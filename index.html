<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üè† SmartHome Dashboard - ESP32</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <script>
        // C·∫•u h√¨nh Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyAzGFnXElghlmMwHwcUgVvm76WD4U2fvw0",
            authDomain: "smarthome-iot-2d485.firebaseapp.com",
            databaseURL: "https://smarthome-iot-2d485-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "smarthome-iot-2d485",
            storageBucket: "smarthome-iot-2d485.firebasestorage.app",
            messagingSenderId: "213310468856",
            appId: "1:213310468856:web:ebd4a01bc50283f8b8410d"
        };

        // Kh·ªüi t·∫°o Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üè† SmartHome Dashboard</h1>
            <div class="status-indicator">
                <span id="connection-status" class="status-dot offline"></span>
                <span id="connection-text">ƒêang k·∫øt n·ªëi...</span>
            </div>
        </header>

        <div class="dashboard">
            <!-- Gas Sensor Card -->
            <div class="card gas-card">
                <div class="card-header">
                    <h2>üîç C·∫£m Bi·∫øn Kh√≠ Gas</h2>
                    <span class="card-status" id="gas-status">B√¨nh th∆∞·ªùng</span>
                </div>
                <div class="card-body">
                    <div class="sensor-value">
                        <span class="value" id="gas-value">0</span>
                        <span class="unit">PPM</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="gas-progress"></div>
                    </div>
                    <div class="sensor-info">
                        <div class="info-item">
                            <span>Ng∆∞·ª°ng an to√†n:</span>
                            <span>0-1000 PPM</span>
                        </div>
                        <div class="info-item danger">
                            <span>Nguy hi·ªÉm:</span>
                            <span>>1000 PPM</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Light Sensor Card -->
            <div class="card light-sensor-card">
                <div class="card-header">
                    <h2>‚òÄÔ∏è C·∫£m Bi·∫øn √Ånh S√°ng</h2>
                    <span class="card-status" id="light-sensor-status">S√°ng</span>
                </div>
                <div class="card-body">
                    <div class="sensor-value">
                        <div class="light-indicator" id="light-indicator">
                            <div class="sun-icon" id="sun-icon">‚òÄÔ∏è</div>
                            <div class="moon-icon" id="moon-icon">üåô</div>
                        </div>
                    </div>
                    <div class="sensor-info">
                        <div class="info-item">
                            <span>Tr·∫°ng th√°i:</span>
                            <span id="light-sensor-text">ƒêang ƒë·ªçc...</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Alert LED Card (ƒê√®n B√°o ƒê·ªông) -->
            <div class="card alert-led-card">
                <div class="card-header">
                    <h2>üö® ƒê√®n B√°o ƒê·ªông</h2>
                    <span class="card-status" id="alert-led-status">T·∫Øt</span>
                </div>
                <div class="card-body">
                    <div class="control-section">
                        <div class="device-icon alert-icon" id="alert-led-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 6v6M12 16h.01"/>
                            </svg>
                        </div>
                        <div class="info-text">
                            <p>ƒê√®n n√†y t·ª± ƒë·ªông s√°ng khi ph√°t hi·ªán kh√≠ gas nguy hi·ªÉm</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Smart Light Card (ƒê√®n Th√¥ng Minh) -->
            <div class="card smart-light-card">
                <div class="card-header">
                    <h2>üí° ƒê√®n Th√¥ng Minh</h2>
                    <span class="card-status" id="smart-light-status">T·∫Øt</span>
                </div>
                <div class="card-body">
                    <div class="control-section">
                        <div class="device-icon" id="smart-light-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 21h6M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                            </svg>
                        </div>
                        
                        <!-- Mode Toggle -->
                        <div class="mode-toggle">
                            <label class="toggle-label">
                                <span>Ch·∫ø ƒë·ªô:</span>
                                <label class="switch">
                                    <input type="checkbox" id="auto-mode-toggle">
                                    <span class="slider"></span>
                                </label>
                                <span id="mode-text">T·ª± ƒë·ªông</span>
                            </label>
                        </div>

                        <!-- Manual Control (ch·ªâ hi·ªán khi Manual mode) -->
                        <div class="control-buttons" id="manual-control" style="display: none;">
                            <button class="btn btn-on" id="smart-light-on">B·∫≠t ƒê√®n</button>
                            <button class="btn btn-off" id="smart-light-off">T·∫Øt ƒê√®n</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Face Unlock Card -->
            <div class="card ai-card">
                <div class="card-header">
                    <h2>ü§ñ AI Face Unlock</h2>
                    <span class="card-status" id="ai-status">S·∫µn s√†ng</span>
                </div>
                <div class="card-body">
                    <div class="control-section">
                        <div class="device-icon ai-icon" id="ai-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 11a3 3 0 106 0M9 11a3 3 0 106 0M9 11v6a3 3 0 006 0v-6M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <div class="ai-info">
                            <p class="ai-description">H·ªá th·ªëng nh·∫≠n di·ªán khu√¥n m·∫∑t t·ª± ƒë·ªông m·ªü c·ª≠a</p>
                            <div class="ai-status-display">
                                <div class="status-item">
                                    <span>Tr·∫°ng th√°i:</span>
                                    <span id="ai-status-text">ƒêang ch·ªù...</span>
                                </div>
                                <div class="status-item">
                                    <span>L·∫ßn m·ªü g·∫ßn nh·∫•t:</span>
                                    <span id="ai-last-open">Ch∆∞a c√≥</span>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-test" id="test-ai-door">Test M·ªü C·ª≠a</button>
                    </div>
                </div>
            </div>

            <!-- Door/Servo Card -->
            <div class="card door-card">
                <div class="card-header">
                    <h2>üö™ C·ª≠a S·ªï</h2>
                    <span class="card-status" id="door-status">ƒê√≥ng</span>
                </div>
                <div class="card-body">
                    <div class="control-section">
                        <div class="device-icon door-icon" id="door-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2"/>
                                <path d="M9 9h6M9 15h6"/>
                            </svg>
                        </div>
                        <div class="door-info">
                            <p>T·ª± ƒë·ªông m·ªü khi ph√°t hi·ªán gas ho·∫∑c nh·∫≠n di·ªán khu√¥n m·∫∑t</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Buzzer Card -->
            <div class="card buzzer-card">
                <div class="card-header">
                    <h2>üîä C√≤i B√°o ƒê·ªông</h2>
                    <span class="card-status" id="buzzer-status">T·∫Øt</span>
                </div>
                <div class="card-body">
                    <div class="control-section">
                        <div class="device-icon" id="buzzer-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 18V5l12-2v13M9 18c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zm12-3c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zM9 12l12-2"/>
                            </svg>
                        </div>
                        <div class="info-text">
                            <p>T·ª± ƒë·ªông k√™u khi ph√°t hi·ªán kh√≠ gas nguy hi·ªÉm</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Log Section -->
        <div class="log-section">
            <h3>üìã Nh·∫≠t K√Ω Ho·∫°t ƒê·ªông</h3>
            <div class="log-container" id="log-container">
                <div class="log-item">H·ªá th·ªëng ƒë√£ kh·ªüi ƒë·ªông...</div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
